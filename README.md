# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура

![UML-диаграмма](uml-diagramm.png)

## Базовый код

### 1. Класс `Api`

Класс `Api` предоставляет удобный интерфейс для выполнения HTTP-запросов к REST API. Он поддерживает настройку базового URL, заголовков и методов запроса, а также включает встроенную обработку ошибок.

#### Основные возможности

- Настройка базового URL: Упрощает работу с API, позволяя указать базовый URL один раз при создании экземпляра класса.
- Поддержка различных HTTP-методов: Реализованы методы для выполнения GET-запросов, а также POST, PUT и DELETE.
- Обработка ошибок: Встроенный механизм обработки ошибок позволяет получать информативные сообщения об ошибках из ответа сервера.
- Гибкая настройка заголовков: Возможность добавлять или переопределять заголовки запросов через конструктор.

#### Типы данных

`ApiListResponse<Type>`
Описывает структуру ответа от API для списков данных:

- `total`: Общее количество элементов.
- `items`: Массив элементов типа Type.

`ApiPostMethods`
Ограничивает допустимые HTTP-методы для POST-подобных запросов.

#### Конструктор

`constructor(baseUrl: string, options: RequestInit = {});`

##### Параметры:

- `baseUrl: string` — Базовый URL для всех запросов.
- `options: RequestInit` (опционально) — Дополнительные настройки для HTTP-запросов (например, заголовки). По умолчанию пустой объект.

##### Поля:

`readonly baseUrl: string`

Тип: `string` Модификатор доступа: `readonly`

###### Предназначение:

- Хранит базовый URL для всех HTTP-запросов.
- Используется для формирования полного пути к API путем конкатенации с относительным URI (например, `/users`).

`protected options: RequestInit`

Тип: `RequestInit` Модификатор доступа: `protected`

###### Предназначение:

- Содержит настройки для HTTP-запросов, такие как заголовки (`headers`), методы (`method`), тело запроса (`body`) и другие параметры.
- Эти настройки применяются ко всем запросам, выполняемым через экземпляр класса `Api`.
- Заголовок `'Content-Type': 'application/json'` устанавливается по умолчанию, но может быть переопределен или дополнен через конструктор.

##### Методы:

Класс имеет методы $${\color{green}\Large{}\textbf{get}}$$ для получения данных от сервера с помощью GET запросов, $${\color{green}\Large{}\textbf{post}}$$ для отправки на сервер POST, PUT и DELETE запросов и $${\color{green}\Large{}\textbf{handleResponse}}$$ для обработки ошибок.

### 2. Класс `Component<T>`

Класс `Component<T>` представляет собой абстрактный базовый класс для создания компонентов пользовательского интерфейса. Он предоставляет инструментарий для работы с DOM-элементами, такими как управление классами, текстовым содержимым, состоянием блокировки, видимостью, изображениями и т.д. Этот класс является универсальным и может быть расширен для создания специализированных компонентов.

#### Зона ответственности:

- Управление базовыми операциями с DOM-элементами.
- Предоставление методов для манипуляции стилями, атрибутами и содержимым элементов.
- Поддержка рендеринга компонента с передачей данных.

#### Конструктор

`protected constructor(protected readonly container: HTMLElement)`

Конструктор принимает корневой DOM-элемент (`container`) и сохраняет его в защищенном поле `container`. Этот элемент будет использоваться всеми методами класса для выполнения операций с DOM.

##### Параметры:

`container: HTMLElement` — корневой DOM-элемент, который будет использоваться как контейнер для компонента. Этот элемент является основным местом, где будут происходить все манипуляции.

##### Поля класса

`protected readonly container: HTMLElement`

- Назначение: Хранит ссылку на корневой DOM-элемент, который является контейнером для компонента.
- Данные: Экземпляр HTMLElement, переданный через конструктор.

##### Методы класса

$${\color{green}\Large{}\textbf{toggleClass}}$$ Переключает указанный класс для элемента. Если параметр `force` не передан, класс будет добавлен, если его нет, и удален, если он уже существует.

Параметры:

- `element: HTMLElement` — элемент, для которого нужно переключить класс.
- `className: string` — имя класса, которое нужно добавить или удалить.
- `force: boolean | undefined` (опционально) — если указано, то класс будет добавлен (`true`) или удален (`false`), независимо от текущего состояния.

Возвращаемое значение: (`void`).

$${\color{green}\Large{}\textbf{setText}}$$ Устанавливает текстовое содержимое элемента. Если `value` равно `null` или `undefined`, оно будет преобразовано в пустую строку.

Параметры:

- `element: HTMLElement` — элемент, для которого нужно установить текстовое содержимое.
- `value: unknown` — значение, которое нужно преобразовать в строку и установить как текстовое содержимое элемента.

Возвращаемое значение: (`void`).

$${\color{green}\Large{}\textbf{setDisabled}}$$ Блокирует или разблокирует элемент, добавляя или удаляя атрибут `disabled`.

Параметры:

- `element: HTMLElement` — элемент, для которого нужно изменить состояние блокировки.
- `state: boolean` — новое состояние блокировки (`true` — заблокировать, `false` — разблокировать).

Возвращаемое значение: (`void`).

$${\color{green}\Large{}\textbf{setHidden}}$$ Скрывает элемент, устанавливая его стиль `display` в значение `none`.

Параметры:

- `element: HTMLElement` — элемент, который нужно скрыть.

Возвращаемое значение: (`void`).

$${\color{green}\Large{}\textbf{setVisible}}$$ Показывает элемент, удаляя свойство `display` из его стилей.

Параметры:

- `element: HTMLElement` — элемент, который нужно показать.

Возвращаемое значение: (`void`).

$${\color{green}\Large{}\textbf{setImage}}$$ Устанавливает атрибут `src` для изображения и, при необходимости, альтернативный текст (`alt`).

Параметры:

- `element: HTMLImageElement` — элемент изображения, для которого нужно установить источник и альтернативный текст.
- `src: string` — URL изображения.
- `alt: string | undefined` (опционально) — альтернативный текст для изображения.

Возвращаемое значение: (`void`).

$${\color{green}\Large{}\textbf{render}}$$ Применяет переданные данные к текущему экземпляру компонента (если они есть) и возвращает корневой DOM-элемент. Используется для рендеринга компонента.

Параметры:

- `data: Partial<T> | undefined` — частичные данные, которые нужно применить к компоненту.

Возвращаемое значение: `HTMLElement` — корневой DOM-элемент компонента.

Класс `Component<T>` предоставляет мощный и гибкий инструментарий для создания UI-компонентов. Его методы позволяют легко манипулировать DOM-элементами, а абстрактная природа класса делает его удобным для расширения в дочерних классах.

### 3. Класс `EventEmitter`

Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков
о наступлении события.

Класс имеет методы $${\color{green}\Large{}\textbf{on}}$$, $${\color{green}\Large{}\textbf{off}}$$, $${\color{green}\Large{}\textbf{emit}}$$ — для подписки на событие, отписки от события и уведомления
подписчиков о наступлении события соответственно.

Дополнительно реализованы методы $${\color{green}\Large{}\textbf{onAll}}$$ и $${\color{green}\Large{}\textbf{offAll}}$$ — для подписки на все события и сброса всех
подписчиков.

Интересным дополнением является метод $${\color{green}\Large{}\textbf{trigger}}$$, генерирующий заданное событие с заданными
аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти
классы будут генерировать события, не будучи при этом напрямую зависимыми от класса EventEmitter.

### 4. Класс `Model<T>`

## Model

### 1. Класс `Basket`

## View

### 1. Класс `Form<T>`

### 2. Класс `Modal`

### 3. Класс `Success`

## Presenter

Код презентера не будет выделен в отдельный класс, а будет размещен в основном скрипте приложения.
